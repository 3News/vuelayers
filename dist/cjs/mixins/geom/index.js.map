{"version":3,"sources":["webpack:///webpack/bootstrap 3bfcce1881cc488627dc?601b*****","webpack:///external \"vuelayers/dist/cjs/rx\"?21e7**","webpack:///./src/components/geom/geom.js","webpack:///external \"rxjs/add/operator/distinctUntilChanged\"?e7c1*","webpack:///external \"rxjs/add/operator/map\"?690b*","webpack:///external \"rxjs/add/operator/throttleTime\"?27be*","webpack:///external \"vuelayers/dist/cjs/ol\"?d216***","webpack:///external \"vuelayers/dist/cjs/utils/debug\"?e6b8***","webpack:///external \"vuelayers/dist/cjs/mixins/rx-subs\"?0ae0*","webpack:///external \"babel-runtime/helpers/slicedToArray\"","webpack:///external \"rxjs/Observable\"?16be**","webpack:///external \"lodash/fp/isEqual\"?d897**"],"names":["props","coordinates","type","Array","required","validator","isArray","value","length","layout","String","default","computed","geometry","getType","methods","initialize","createGeometry","$vm","coordTransform","currentCoordinates","toLonLat","getCoordinates","view","getProjection","currentExtent","extentToLonLat","getExtent","Error","subscribeAll","subscribeToGeomChanges","mountGeometry","feature","setGeometry","process","env","NODE_ENV","unmountGeometry","unsubscribeAll","undefined","refresh","changed","watch","setCoordinates","fromLonLat","mixins","inject","provide","render","h","data","slice","created","mounted","destroyed","rxSubs","geomChanges","fromOlEvent","throttleTime","map","distinctUntilChanged","a","b","subscribe","extent","$emit","error"],"mappings":"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","file":"cjs/mixins/geom/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 128);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3bfcce1881cc488627dc","module.exports = require(\"vuelayers/dist/cjs/rx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuelayers/dist/cjs/rx\"\n// module id = 11\n// module chunks = 1 2 3 5","import { isEqual } from 'lodash/fp'\nimport { Observable } from 'rxjs/Observable'\nimport 'rxjs/add/operator/throttleTime'\nimport 'rxjs/add/operator/distinctUntilChanged'\nimport 'rxjs/add/operator/map'\nimport 'vl-rx'\nimport rxSubs from 'vl-mixins/rx-subs'\nimport { coord as coordHelper } from 'vl-ol'\nimport { warn } from 'vl-utils/debug'\n\nconst props = {\n  /**\n   * Coordinates in EPSG:4326\n   */\n  coordinates: {\n    type: Array,\n    required: true,\n    validator: value => Array.isArray(value) && value.length\n  },\n  layout: {\n    type: String,\n    default: 'XY'\n  }\n}\n\nconst computed = {\n  type () {\n    return this.geometry.getType()\n  }\n}\n\nconst methods = {\n  /**\n   * @protected\n   */\n  initialize () {\n    /**\n     * @type {ol.geom.SimpleGeometry}\n     * @protected\n     */\n    this.geometry = this.createGeometry()\n    this.geometry.$vm = this\n    /**\n     * @protected\n     */\n    this.coordTransform = coordHelper.coordTransform[ this.geometry.getType() ]\n\n    this.currentCoordinates = this.coordTransform.toLonLat(this.geometry.getCoordinates(), this.view().getProjection())\n    this.currentExtent = coordHelper.extentToLonLat(this.geometry.getExtent(), this.view().getProjection())\n  },\n  /**\n   * @return {ol.geom.SimpleGeometry}\n   * @protected\n   */\n  createGeometry () {\n    throw new Error('Not implemented method')\n  },\n  subscribeAll () {\n    this::subscribeToGeomChanges()\n  },\n  /**\n   * @protected\n   */\n  mountGeometry () {\n    if (this.feature()) {\n      this.feature().setGeometry(this.geometry)\n      this.subscribeAll()\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn(\"Invalid usage of geometry component, should have feature component among it's ancestors\")\n    }\n  },\n  /**\n   * @protected\n   */\n  unmountGeometry () {\n    this.unsubscribeAll()\n    this.feature() && this.feature().setGeometry(undefined)\n  },\n  refresh () {\n    this.geometry && this.geometry.changed()\n  }\n}\n\nconst watch = {\n  coordinates (value) {\n    this.geometry.setCoordinates(this.coordTransform.fromLonLat(value, this.view().getProjection()))\n  }\n}\n\nexport default {\n  mixins: [ rxSubs ],\n  inject: [ 'view', 'feature' ],\n  props,\n  computed,\n  watch,\n  methods,\n  provide () {\n    return {\n      geometry: () => this.geometry\n    }\n  },\n  render: h => h(),\n  data () {\n    return {\n      currentCoordinates: this.coordinates.slice(),\n      currentExtent: []\n    }\n  },\n  created () {\n    this.initialize()\n  },\n  mounted () {\n    this.mountGeometry()\n  },\n  destroyed () {\n    this.unmountGeometry()\n    this.geometry = undefined\n  }\n}\n\nfunction subscribeToGeomChanges () {\n  this.rxSubs.geomChanges = Observable.fromOlEvent(this.geometry, 'change')\n    .throttleTime(100)\n    .map(() => {\n      return [\n        this.coordTransform.toLonLat(this.geometry.getCoordinates(), this.view().getProjection()),\n        coordHelper.extentToLonLat(this.geometry.getExtent(), this.view().getProjection())\n      ]\n    })\n    .distinctUntilChanged((a, b) => isEqual(a, b))\n    .subscribe(\n      ([ coordinates, extent ]) => {\n        this.currentCoordinates = coordinates\n        this.currentExtent = extent\n        this.$emit('change', { coordinates, extent })\n      },\n      ::console.error\n    )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/geom/geom.js","module.exports = require(\"rxjs/add/operator/distinctUntilChanged\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs/add/operator/distinctUntilChanged\"\n// module id = 14\n// module chunks = 1 2 5","module.exports = require(\"rxjs/add/operator/map\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs/add/operator/map\"\n// module id = 15\n// module chunks = 1 2 5","module.exports = require(\"rxjs/add/operator/throttleTime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs/add/operator/throttleTime\"\n// module id = 16\n// module chunks = 1 2 5","module.exports = require(\"vuelayers/dist/cjs/ol\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuelayers/dist/cjs/ol\"\n// module id = 2\n// module chunks = 1 2 3 5 7 8 9 10 11 12 15 18 19 30","module.exports = require(\"vuelayers/dist/cjs/utils/debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuelayers/dist/cjs/utils/debug\"\n// module id = 3\n// module chunks = 1 2 3 4 5 6 30 31 35","module.exports = require(\"vuelayers/dist/cjs/mixins/rx-subs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vuelayers/dist/cjs/mixins/rx-subs\"\n// module id = 4\n// module chunks = 1 2 5 30 31 35","module.exports = require(\"babel-runtime/helpers/slicedToArray\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/slicedToArray\"\n// module id = 55\n// module chunks = 5","module.exports = require(\"rxjs/Observable\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rxjs/Observable\"\n// module id = 6\n// module chunks = 1 2 3 5 29","module.exports = require(\"lodash/fp/isEqual\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/fp/isEqual\"\n// module id = 8\n// module chunks = 0 1 2 5"],"sourceRoot":""}